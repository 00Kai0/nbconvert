============================= test session starts ==============================
platform darwin -- Python 3.5.2, pytest-3.0.5, py-1.4.32, pluggy-0.4.0
rootdir: /Users/cocosci/Jupyter/nbconvert, inifile: 
plugins: xonsh-0.4.7
collected 13 items

nbconvert/exporters/tests/test_templateexporter.py ......F......

=================================== FAILURES ===================================
_____________ TestExporter.test_in_memory_template_failure_to_find _____________

self = <nbconvert.exporters.tests.test_templateexporter.TestExporter testMethod=test_in_memory_template_failure_to_find>

    @pytest.mark.xfail(strict=True, raises=TemplateNotFound)
    def test_in_memory_template_failure_to_find(self):
        # Loads in an in memory template using jinja2.DictLoader
        # creates a class that uses this template with the template_file argument
        # converts an empty notebook using this mechanism
    
        class MyExporter(TemplateExporter):
            self.template_file = 'my_template'
    
        with tempdir.TemporaryDirectory() as td:
            template = os.path.join(td, 'my_template')
            test_output = 'absolute!'
            with open(template, 'w') as f:
                f.write(test_output)
    
            exporter = MyExporter(extra_loaders=[ExtensionTolerantLoader(FileSystemLoader(td), ".tpl")])
            exporter.template_file = template + ".tpl"
            nb = v4.new_notebook()
>           out, resources = exporter.from_notebook_node(nb)

nbconvert/exporters/tests/test_templateexporter.py:153: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
nbconvert/exporters/templateexporter.py:240: in from_notebook_node
    output = self.template.render(nb=nb_copy, resources=resources)
nbconvert/exporters/templateexporter.py:112: in template
    self._template_cached = self._load_template()
nbconvert/exporters/templateexporter.py:223: in _load_template
    return self.environment.get_template(template_file)
../../anaconda3/envs/dev/lib/python3.5/site-packages/jinja2/environment.py:812: in get_template
    return self._load_template(name, self.make_globals(globals))
../../anaconda3/envs/dev/lib/python3.5/site-packages/jinja2/environment.py:774: in _load_template
    cache_key = self.loader.get_source(self, name)[1]
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <jinja2.loaders.ChoiceLoader object at 0x107a98208>
environment = <jinja2.environment.Environment object at 0x107a98048>
template = '/var/folders/gw/f4v87fhd2rj62q1zzc0pr1l40000gp/T/tmp59cxizjk/my_template.tpl'

    def get_source(self, environment, template):
        for loader in self.loaders:
            try:
                return loader.get_source(environment, template)
            except TemplateNotFound:
                pass
>       raise TemplateNotFound(template)
E       jinja2.exceptions.TemplateNotFound: /var/folders/gw/f4v87fhd2rj62q1zzc0pr1l40000gp/T/tmp59cxizjk/my_template.tpl

../../anaconda3/envs/dev/lib/python3.5/site-packages/jinja2/loaders.py:399: TemplateNotFound
----------------------------- Captured stdout call -----------------------------
/var/folders/gw/f4v87fhd2rj62q1zzc0pr1l40000gp/T/tmp59cxizjk/my_template.tpl True
/var/folders/gw/f4v87fhd2rj62q1zzc0pr1l40000gp/T/tmp59cxizjk/my_template.tpl True
===================== 1 failed, 12 passed in 1.39 seconds ======================
